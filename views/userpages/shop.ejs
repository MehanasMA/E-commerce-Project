<!doctype html>
<html lang="en">

<head>
	<title>Shop</title>


	<!-- Custom styles for this template -->
     
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="icon" href="../../../../favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700,900" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,500,700,900" rel="stylesheet">
	
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!-- Bootstrap core CSS -->
	<link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">
	<!-----google fonts cdn-------->
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="img/favicon.ico" rel="icon">
	
	<!-- Google Web Fonts -->
	<!-- <link rel="preconnect" href="https://fonts.gstatic.com"> -->
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
		rel="stylesheet">
	
	<!-- Font Awesome -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
	<!-- Bootstrap core CSS -->
	<link href="css/styles.css" rel="stylesheet">
	<link href="css/animate.css" rel="stylesheet">
	<link href="css/owl-carousel.css" rel="stylesheet">
	<link href="css/lightbox.css" rel="stylesheet">
	<link href="css/cookiealert.css" rel="stylesheet">



</head>

<body class="index layout5">

	<header class="header-area header-sticky text-center header-default">
		<div class="header-main-sticky">
			
			<div class="header-main-head">

				<div class="header-main">
					<div class="container">
						<div class="header-left float-left d-flex d-lg-flex d-md-block d-xs-block">

							
							<div class="contact">
								<i class="material-icons">phone</i>
								<span>1234567890</span>
							</div>
						</div>
						<div class="header-middle float-lg-left float-md-left float-sm-left float-xs-none">
							<div class="logo">
								<a href="/"><img src="img/logos/logo.png" alt="NatureCircle"></a>
							</div>
						</div>
						<div class="header-right d-flex d-xs-flex d-sm-flex justify-content-end float-right">
							<div class="search-wrapper">
								<a>
									<i class="material-icons search">search</i>
									<i class="material-icons close">close</i>
								</a>
								<form autocomplete="off" action="/action_page.php" class="search-form">
									<div class="autocomplete" style="width:300px;">
										<input id="myInput" type="text" name="myCountry" placeholder="Search here">
										<button type="button"><i class="material-icons">search</i></button>
									</div>
								</form>
							</div>
							<div class="user-info">
								<button type="button" class="btn">
									<i class="material-icons">perm_identity</i>
								</button>
								<div id="user-dropdown" class="user-menu">
									<ul>

										<li><a href="/myaccount" class="text-capitalize">my account</a></li>


										
										<li> <a class="" href="/logout">Logout</a></li>

									</ul>
								</div>
							</div>
							<div class="cart-wrapper">
								<form action="/cart/cartpage" method="get">

									<button class="btn" type="submit"><a href="/cart/cartpage">
											<i class="material-icons">shopping_cart</i>
										</a>
									</button>
									</form>
									<div id="cart-dropdown" class="cart-menu">
										<ul class="w-100 float-left">


											
										</ul>
									</div>
							</div>
							<div>
								

									<i class="fa-solid fa-heart"></i>
									<span class="material-symbols-outlined"><a href="/wishlist/wishlist">
											favorite</a>
									</span>


									
							</div>
						</div>
					</div>
				</div>
				<div class="menu">
					<div class="container">
						<!--- Navbar -->
						<nav class="navbar navbar-expand-lg navbar-light d-sm-none d-xs-none d-lg-block navbar-full">

							<!-- Navbar brand -->
							<a class="navbar-brand text-uppercase d-none" href="#">Navbar</a>

							<!-- Collapse button -->
							<button class="navbar-toggler" type="button" data-toggle="collapse"
								data-target="#navbarSupportedContent2" aria-controls="navbarSupportedContent2"
								aria-expanded="false" aria-label="Toggle navigation">
								<span class="navbar-toggler-icon"></span>
							</button>

							<!-- Collapsible content -->
							<div class="collapse navbar-collapse">

								<!-- Links -->
								<ul class="navbar-nav m-auto justify-content-center">
									<li class="nav-item  active">
										<a class="nav-link text-uppercase" href="/">
											Home
											<span class="sr-only">(current)</span> </a>

									</li>
									<!-- <li class="nav-item">
										<a class="nav-link text-uppercase" href="/category">Category</a>

									</li> -->
									<li class="nav-item ">
										<a class="nav-link text-uppercase" href="/about">About us</a>
									</li>


									<li class="nav-item">
										<a class="nav-link text-uppercase" href="/shop">
											Shop
											<span class="sr-only">(current)</span> </a>

									</li>

									<li class="nav-item ">
										<a class="nav-link text-uppercase" href="/contact">Contact us</a>
									</li>
									
								</ul>
								<!-- Links -->
							</div>
							<!-- Collapsible content -->

						</nav>
					</div>
				</div>
			</div>
		</div>
	</header>


	
	<div class="product-deatils-section col-12">
		<div class="container-fluid">
			<div class="row ">
			<div class="shop_sidebar_categories">
				<% let n=1; for(datas of newCategory) { %>
					<div class="nice-scroll">
					<li class="main-nav-list"><a style="cursor:pointer;" onclick="selectCategory('<%= datas._id %>')"><span
								class="Inr Inr-arrow-right"></span>
							<%= datas.category %>
						</a>
					</li>
			</div>
			
					<% n++ }%>
			</div>
							
				<div class="row" id="product"> 
					<% for(let datas of product){ %>
				
				
						<div class="card col-4 mx-auto mt-5" style="width: 24rem;">
				
				
							<img src="<%= datas.image[0].url %>" class="card-img-top" alt="..."><button class="btn btn-dark"><a href="/product/productDetails/<%= datas._id %> "><i class="fas fa-eye  mr-1"></i>View Detail</a></button>
							<div class="card-body">
								<h5 class="card-title" value="<%= datas.product_name %>">
									<%= datas.product_name %>
								</h5>
								<!-- <p class="card-text" value="<%= datas.product_description %>">
									<%= datas.product_description %>
								</p> -->
								<h3 class="card-text my-3" value="<%= datas.product_price %>">Rs.<%= datas.product_price %>
								</h3>
								
				
								<button data-bs-toggle="modal" data-bs-target="#exampleModal1<%=datas._id%>" 
									class="btn btn-primary">Add To wishlist</button>
									
									

									<button data-bs-toggle="modal" data-bs-target="#exampleModal<%=datas._id%>" 
										class="btn btn-primary"><i class="fas fa-shopping-cart text-primary "></i>Add To Cart</button>
								</div>
							</div>
								<% } %>
						
				</div>
			</div>
		</div>
		</div>

		</div>
		</div>
		
		



		<footer class="page-footer font-small footer-default">
		
		
			<div class="container-fluid  mt-2 pt-2 ">
				<div class="row px-xl-5 pt-5">
					<div class="col-lg-12 col-md-12 mb-5 pr-3 pr-xl-5 text-center text-white">
						<a href="" class="text-decoration-none">
							<h1 class="mb-4 display-5 font-weight-semi-bold"><span class=" px-3 mr-1">
									<div class="footer-logo"><img src="img/logos/footer-logo.png" alt="footer-logo"></div>
								</span></h1>
						</a>
						<p>Dolore erat dolor sit lorem vero amet. Sed sit lorem magna, ipsum no sit erat lorem et magna ipsum
							dolore
							amet erat.</p>
						<p class="mb-2"><i class="fa fa-map-marker-alt  mr-3"></i>123 Street, KERALA, INDIA</p>
						<p class="mb-2"><i class="fa fa-envelope  mr-3"></i>victoria@example.com</p>
						<p class="mb-0"><i class="fa fa-phone-alt  mr-3"></i>+012 345 67890</p>
					</div>
		
				</div>
				<div class="row border-top border-light mx-xl-5 py-4">
					<div class="col-lg-12 px-xl-0 text-center">
						<p class="mb-md-0  text-white">
							&copy; <a class="text-white font-weight-semi-bold" href="/">www.eShop.com</a>. All Rights Reserved.
							Designed
							by
							<a class="text-white font-weight-semi-bold" href="https://htmlcodex.com">Developers of
								victoria</a><br>
							Distributed By <a href="https://themewagon.com" target="_blank"> victoria</a>
						</p>
					</div>
					<div class="col-md-6 px-xl-0 text-center text-md-right">
						<img class="img-fluid" src="img/payments.png" alt="">
					</div>
				</div>
			</div>
		</footer>
		<!-- Footer -->


		<!-- Register modal -->
		


<% for( let datas of product ){ %>
<div class="modal fade" id="exampleModal1<%=datas._id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
	aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Wishlist Item</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<% if(user) { %>
				<div id="message" class="modal-body text-success">
					Successfully added to wishlist....!!
				</div>
				<% } else { %>
					<div class="modal-body text-danger">
						You are not logged in !!!
					</div>
					<% } %>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="wishlist('<%= datas._id %>')">OK</button>


						</div>
		</div>
	</div>
</div>
<%}%>




        <% for( let datas of product ){ %>
		<div class="modal fade" id="exampleModal<%=datas._id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
			aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Cart Item</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<% if(user){ %>
						<div class="modal-body text-success">
							Item added to your Cart successfully...
						</div>
						<% } else { %>
							<div class="modal-body text-danger">
								You are not logged in !!!
							</div>
							<% } %>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" onclick="cartList('<%= datas._id %>')" data-bs-dismiss="modal">OK</button>
		
		
								</div>
				</div>
			</div>
		</div>
		
			<%}%>
								


		<!-- Bootstrap core JavaScript
    ================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/owl.carousel.min.js"></script>
		<script src="js/parallax.js"></script>
		<script src="js/jquery-ui.min.js"></script>
		<script src="js/ResizeSensor.min.js"></script>
		<script src="js/theia-sticky-sidebar.min.js"></script>
		<script src="js/custom.js"></script>
		<script src="js/jquery.countdown.min.js"></script>
		<script src="js/masonry.pkgd.min.js"></script>
		<script src="js/imagesloaded.pkgd.min.js"></script>
		<script src="js/jquery.zoom.min.js"></script>
		<script src="js/slick.min.js"></script>
		<script>
			$(document).ready(function () {
				$('#product-compact .product-large-image').slick({
					slidesToShow: 1,
					slidesToScroll: 1,
					arrows: false,
					fade: true,
					asNavFor: '#product-compact .compact'
				});
				$('#product-compact .compact').slick({
					vertical: true,
					slidesToShow: 3,
					slidesToScroll: 1,
					asNavFor: '#product-compact .product-large-image',
					dots: false,
					arrows: true,
					prevArrow: '<button type="button" class="slick-prev btn btn-primary"><i class="material-icons">keyboard_arrow_left</i></button>',
					nextArrow: '<button type="button" class="slick-next btn btn-primary"><i class="material-icons">keyboard_arrow_right</i></button>',
					autoplay: true,
					autoplaySpeed: 6000,
					centerMode: true,
					centerPadding: '0',
					focusOnSelect: true,
					responsive: [
						{
							breakpoint: 1024,
							settings: {
								slidesToShow: 3,
								slidesToScroll: 1,
							}
						},
						{
							breakpoint: 600,
							settings: {
								slidesToShow: 3,
								slidesToScroll: 1
							}
						},
						{
							breakpoint: 480,
							settings: {
								slidesToShow: 2,
								slidesToScroll: 1
							}
						}
						// You can unslick at a given breakpoint now by adding:
						// settings: "unslick"
						// instead of a settings object
					]
				});
			});	
		</script>
		<!--Start of Tawk.to Script-->
		<script type="text/javascript">
			var Tawk_API = Tawk_API || {}, Tawk_LoadStart = new Date();
			(function () {
				var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
				s1.async = true;
				s1.src = 'https://embed.tawk.to/5ac1aabb4b401e45400e4197/default';
				s1.charset = 'UTF-8';
				s1.setAttribute('crossorigin', '*');
				s0.parentNode.insertBefore(s1, s0);
			})();
		</script>
		<script>
			function cartList(id) {
				console.log("id",id);
					fetch('/cart/addToCart/' + id, {
						method: 'post',
						headers: {
							'Content-type': 'application/json',
							body: JSON.stringify({hey:"done"})
						},
					})
						.then(res => res.json())
				}
		</script>

					<script>
						function wishlist(id) {
							console.log(id);
							fetch('/wishlist/addToWishlist/' + id, {
								method: 'post',
								headers: {
									'Content-type': 'application/json',
								},
								body: JSON.stringify({ hai: "jhj" })
							})
								.then(res => res.json())
								.then(data => {
									if (data.success == true) {
										document.getElementById('message').innerHTML = "<div class='text-success'> Item added to your Wishlist successfully...</div>"
									} else {
										document.getElementById('message').innerHTML = "<div class='text-danger'>Item already exist in your Wishlist !!!</div>"
									}
								})
						}
						</script>
		<!-- <script>
			function cartList(id) {
				fetch('/addToCart/' + id, {
					method: 'get',
					headers: {
						'Content-type': 'application/json',
						body: JSON.stringify({ hai: "set" })
					}
				})
					.then(res => res.json())
			}
		</script> -->
		<script>
			function myFunction() {
				let input, filter, cards, cardContainer, title, i;
				input = document.getElementById("myFilter");
				filter = input.value.toUpperCase();
				cardContainer = document.getElementById("myProducts");
				cards = cardContainer.getElementsByClassName("card");
				for (i = 0; i < cards.length; i++) {
					title = cards[i].querySelector(".card-title");
					if (title.innerText.toUpperCase().indexOf(filter) > -1) {
						cards[i].style.display = "";
					} else {
						cards[i].style.display = "none";
					}
				}
			}
		</script>
		<script>
			function selectCategory(catagoryId) {
				console.log("jbhhjbjhbb",catagoryId);
				const datas = document.getElementById("product")
				console.log(("HEYYYPPP", datas));
				let allProducts = '';
				fetch("/catagorySort", {
					method: "post",
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ catagoryId })
				}).then(res => res.json()).then(data => {
					for (product of data.product) {
						allProducts += `
		                            

		                                  <div class="card col-4 mx-auto mt-5" style="width: 24rem;">
				
				
							<img src="${product.image[0].url }" class="card-img-top" alt="..."><button class="btn btn-dark"><a href="/product/productDetails/${product._id }"><i class="fas fa-eye  mr-1"></i>View Detail</a></button>
							<div class="card-body">
								<h5 class="card-title" value="<%= datas.product_name %>">
									${product.product_name }
								</h5>
								<!-- <p class="card-text" value="<%= datas.product_description %>">
									${ product.product_description}
								</p> -->
								<h3 class="card-text my-3" value="<%= datas.product_price %>">Rs.${product.product_price }
								</h3>
								
				
								<button data-bs-toggle="modal" data-bs-target="#exampleModal1${product._id} 
									class="btn btn-primary">Add To wishlist</button>
									
									

									<button data-bs-toggle="modal" data-bs-target="#exampleModal${product._id}" 
										class="btn btn-primary"><i class="fas fa-shopping-cart text-primary "></i>Add To Cart</button>
								</div>
							</div>`
								
						datas.innerHTML = allProducts
					}
				})
			}
		</script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
			crossorigin="anonymous"></script>
		<!--End of Tawk.to Script-->
</body>

</html>